<button onclick='startKaraoke()'>start</button><script src="calculator.js"></script>
<div id="calculator" style="width: 100%; height: 50%;"></div>
<script>
	var lyric_elt = document.getElementById('calculator');
	var lyric_calculator = Desmos.GraphingCalculator(lyric_elt);

	function clear_graph() {
		lyric_calculator.controller.externalSetState(lyric_calculator.controller.getBlankState());
	}

	function startKaraoke() {
	console.log(music_calculator.controller.dispatch({type: "keypad/audio-trace", command: "hear-graph"}));
	setTimeout(function() {
		clear_graph()
		lyric_calculator.setExpression({ id: 'line1', latex: 'x^2', color: '#000000' });
		lyric_calculator.setExpression({ id: 'line2', latex: 'x^3', color: '#000000' });
		lyric_calculator.setExpression({ id: 'line3', latex: 'x^4', color: '#000000' });
		setTimeout(function() {
			clear_graph()
			lyric_calculator.setExpression({ id: 'line4', latex: 'x^2', color: '#000000' });
			lyric_calculator.setExpression({ id: 'line5', latex: 'x^3', color: '#000000' });
			lyric_calculator.setExpression({ id: 'line6', latex: 'x^4', color: '#000000' });
			setTimeout(function() {
				clear_graph()
				lyric_calculator.setExpression({ id: 'line7', latex: 'x^2', color: '#000000' });
				lyric_calculator.setExpression({ id: 'line8', latex: 'x^3', color: '#000000' });
				lyric_calculator.setExpression({ id: 'line9', latex: 'x^4', color: '#000000' });
			}, 2000)
		}, 1000)
	}, 0);
	}
</script>

<script src="calculator.js"></script>
<div id="calculator" style="width: auto; height: auto;"></div>
<script>
	var elt = document.getElementById('calculator');
	var music_calculator = Desmos.GraphingCalculator(elt);
	music_calculator.controller.dispatch({type: "set-axis-scale", settings: {axis: "y", scale: "linear", limitLatex: {min: "0",max: "1000"}}});
	music_calculator.controller.dispatch({type: "set-axis-scale", settings: {axis: "x", scale: "linear", limitLatex: {min: "0",max: "1000"}}});	music_calculator.setExpression({ id: 'line1', latex: None, color: '#000000' });
	music_calculator.controller.dispatch({type: "keypad/audio-trace", command: "on"});
	music_calculator.controller.setAudioTraceSpeed(1);
</script>